language: node_js
node_js:
 - "stable"
services: psql
cache: 
  yarn: true
  directories:
   - node_modules
before_script:
 - psql -c 'create database travis_ci' -U root
install:
 - npm install
 - yarn
 - yarn buildEnv
 - yarn cd setup:rest-server && yarn
 - yarn setup:socket-server
 - yarn setup:services/coderunner-service
 - yarn db:setup:rest-server
script:
 - yarn start
